<h2>International Payment</h2>

<div class="international-payment-pay">
    <flow class="wide"></flow>

    <div class="wide notification info">
        Payments take at least 2 business days.
    </div>
    <div ng-show="errorMessage" error notification>{{errorMessage}}</div>
    <div class="panel">
        <div class="row">

            <form name="xbpPayForm" novalidate>
                <ng-form name="xbpPayForm">
                    <div class="large-12 medium-12 small-12 columns">
                        <section>
                            <sb-account-dropdown
                                    name="account"
                                    label="From account"
                                    ng-model="beneficiary.pay.fromAccount"
                                    ng-required="true"
                                    ng-change="populateCurrencyList()"
                                    items="payFromAccounts"
                                    currency-code="availableBalanceCurrencyCode"
                                    highlight-balance="highlightBalance()">
                            </sb-account-dropdown>
                        </section>
                    </div>
                    <div class="large-8 medium-8 small-12 columns">
                        <section class="medium-width" ng-if="beneficiary.reasonForPayment.bopFields">
                            <sb-input name="customsClientNumber"
                                      label="Customs client number"
                                      ng-model="beneficiary.pay.customsClientNumber"
                                      ng-required="true"
                                      ng-minlength="8"
                                      ng-maxlength="8"
                                      ng-pattern="'\\d+'"
                                      min-length-message="Must be 8 digits long"
                                      max-length-message="Must be 8 digits long"
                                      pattern-message="Please enter a valid customs client number">
                            </sb-input>
                        </section>
                        <section class="medium-width">
                            <label for="currency">Currency of payment</label>

                            <div class="styled-select medium-width">
                                <select id="currency"
                                        ng-model="beneficiary.pay.currency"
                                        ng-required="true"
                                        fix-ie-select
                                        ng-options="currency as currency.description for currency in currencies track by currency.code">
                                </select>
                            </div>
                        </section>
                        <section class="medium-width">
                            <sb-amount
                                    ng-model="beneficiary.pay.amount"
                                    currency-code="getCurrencyCode()"
                                    ng-required="true"
                                    enforcer="enforcer"
                                    class="amount"
                                    name="amount"
                                    label="Amount"
                                    hinter="hinter">
                            </sb-amount>
                        </section>

                        <div>
                            <button id="next" class="primary" ng-click="next()"
                                    ng-disabled="!xbpPayForm.$valid">
                                Next
                            </button>
                            <button id="back" class="secondary" ng-click="back()">
                                Back
                            </button>
                        </div>
                    </div>
                    <div class="large-4 medium-4 columns show-for-medium-up"/>
                </ng-form>
            </form>
        </div>
    </div>
</div>